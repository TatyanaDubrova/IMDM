{"version":3,"sources":["router.js"],"names":[],"mappings":"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","file":"router-compiled.js","sourcesContent":["\"use strict\";\r\nvar Router = {\r\n    routes: [],\r\n    mode: null,\r\n    root: '/',\r\n    config: function(options) {\r\n        this.mode = options && options.mode && options.mode == 'history'\r\n        && !!(history.pushState) ? 'history' : 'hash';\r\n        this.root = options && options.root ? '/' + this.clearSlashes(options.root) + '/' : '/';\r\n        return this;\r\n    },\r\n    getFragment: function() {\r\n        var fragment = '';\r\n        if(this.mode === 'history') {\r\n            fragment = this.clearSlashes(decodeURI(location.pathname + location.search));\r\n            fragment = fragment.replace(/\\?(.*)$/, '');\r\n            fragment = this.root != '/' ? fragment.replace(this.root, '') : fragment;\r\n        } else {\r\n            var match = window.location.href.match(/#(.*)$/);\r\n            fragment = match ? match[1] : '';\r\n        }\r\n        return this.clearSlashes(fragment);\r\n    },\r\n    clearSlashes: function(path) {\r\n        return path.toString().replace(/\\/$/, '').replace(/^\\//, '');\r\n    },\r\n    add: function(re, handler) {\r\n        if(typeof re == 'function') {\r\n            handler = re;\r\n            re = '';\r\n        }\r\n        this.routes.push({ re: re, handler: handler});\r\n        return this;\r\n    },\r\n    remove: function(param) {\r\n        for(var i=0, r; i<this.routes.length, r = this.routes[i]; i++) {\r\n            if(r.handler === param || r.re.toString() === param.toString()) {\r\n                this.routes.splice(i, 1);\r\n                return this;\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    flush: function() {\r\n        this.routes = [];\r\n        this.mode = null;\r\n        this.root = '/';\r\n        return this;\r\n    },\r\n    check: function(f) {\r\n        var fragment = f || this.getFragment();\r\n        for(var i=0; i<this.routes.length; i++) {\r\n            var match = fragment.match(this.routes[i].re);\r\n            if(match) {\r\n                match.shift();\r\n                this.routes[i].handler.apply({}, match);\r\n                return this;\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    listen: function() {\r\n        var self = this;\r\n        var current = self.getFragment();\r\n        var fn = function() {\r\n            if(current !== self.getFragment()) {\r\n                current = self.getFragment();\r\n                self.check(current);\r\n            }\r\n        }\r\n        clearInterval(this.interval);\r\n        this.interval = setInterval(fn, 50);\r\n        return this;\r\n    },\r\n    navigate: function(path) {\r\n        path = path ? path : '';\r\n        if(this.mode === 'history') {\r\n            history.pushState(null, null, this.root + this.clearSlashes(path));\r\n        } else {\r\n            window.location.href = window.location.href.replace(/#(.*)$/, '') + '#' + path;\r\n        }\r\n        return this;\r\n    }\r\n}\r\nmodule.exports = Router;\r\n\r\n// configuration\r\n//Router.config({ mode: 'history'});\r\n\r\n// returning the user to the initial state\r\nRouter.navigate();\r\n\r\n// adding routes\r\nRouter\r\n    .add(/about/, function() {\r\n        console.log('about');\r\n    })\r\n    .add(/products\\/(.*)\\/edit\\/(.*)/, function() {\r\n        console.log('products', arguments);\r\n    })\r\n    .add(function() {\r\n        console.log('default');\r\n    })\r\n    .check('/products/12/edit/22').listen();\r\n\r\n// forwarding\r\nRouter.navigate('/about');"]}