{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app-compiled.js","sourcesContent":["/**\r\n * Created by tatsiana.dubrova on 17.08.2016.\r\n */\r\n\"use strict\";\r\nimport Router from \"./core/router\";\r\n\r\n// adding routes\r\nRouter\r\n    .add(/movies/, function() {\r\n        //alert('list of movies');\r\n        document.getElementById('search-section').style.display = 'none';\r\n        document.getElementById('home-button').style.visibility='visible';\r\n        document.getElementById('search-results').style.display = '';\r\n    })\r\n    .add(function() {\r\n        //alert('default');\r\n        document.getElementById('home-button').style.visibility='hidden';\r\n        document.getElementById('search-section').style.display = '';\r\n        document.getElementById('search-results').style.display = 'none';\r\n    }).listen();\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", ready);\r\ndocument.getElementById(\"home-button\").addEventListener(\"click\", getHome);\r\n\r\nfunction ready () {\r\n    Router.navigate();\r\n    document.querySelector(\"#search-form\").addEventListener(\"submit\", function(event){\r\n        clear();\r\n        let searchQuery = document.getElementById('query').value;\r\n        event.preventDefault();\r\n       // console.log(searchQuery);\r\n        Router.navigate(\"/movies\");\r\n        getJSON('http://www.omdbapi.com/?s=' + searchQuery + '&r=json').then(function(data){\r\n           if (!data.Response || data.Error){\r\n               alert(data.Error);\r\n               getHome();\r\n           }\r\n            else if (data.totalResults > 10) {\r\n                 let pageCount = Math.ceil(data.totalResults/10);\r\n                 for (let i=1; i<=pageCount; i++){\r\n                    getJSON('http://www.omdbapi.com/?s=' + searchQuery + '&page=' + i + '&r=json').then(function(data){\r\n                        showResults(data.Search);\r\n                    }, function(status){\r\n                        alert('Something went wrong!');\r\n                    });\r\n                }\r\n            } else {\r\n               showResults(data.Search);\r\n           }\r\n        }, function(status){\r\n            alert('Something went wrong!');\r\n        });\r\n    });\r\n};\r\n\r\nfunction getJSON (url) {\r\n    return new Promise(function(resolve, reject) {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('get', url, true);\r\n        xhr.responseType = 'json';\r\n        xhr.onload = function() {\r\n            let status = xhr.status;\r\n            if (status == 200) {\r\n                resolve(xhr.response);\r\n            } else {\r\n                reject(status);\r\n            }\r\n        };\r\n        xhr.send();\r\n    });\r\n}\r\n\r\nfunction showResults(results){\r\n    let block = document.querySelector(\"#search-results ul\");\r\n    results.forEach(function (element) {\r\n        let nodeLi = document.createElement(\"li\");\r\n\r\n        let nodeImg = document.createElement(\"img\");\r\n        nodeImg.src = element.Poster;\r\n\r\n        let nodeDiv = document.createElement(\"div\");\r\n        nodeDiv.appendChild(nodeImg);\r\n\r\n        let nodeTitle = document.createElement(\"h4\");\r\n        let textTitleNode = document.createTextNode(element.Title);\r\n        nodeTitle.appendChild(textTitleNode);\r\n\r\n        let nodeYear= document.createElement(\"p\");\r\n        let textYearNode = document.createTextNode(\"Year: \" + element.Year + \"  \");\r\n        nodeYear.appendChild(textYearNode);\r\n\r\n        let nodeType = document.createElement(\"p\");\r\n        let textTypeNode = document.createTextNode(\"Type: \" + element.Type);\r\n        nodeYear.appendChild(textTypeNode);\r\n\r\n        nodeLi.appendChild(nodeDiv);\r\n        nodeLi.appendChild(nodeTitle);\r\n        nodeLi.appendChild(nodeYear);\r\n        nodeLi.appendChild(nodeType);\r\n        block.appendChild(nodeLi);\r\n\r\n    });\r\n\r\n}\r\n\r\nfunction clear(){\r\n    let block = document.querySelector(\"#search-results ul\");\r\n    block.innerHTML = \"\";\r\n\r\n}\r\n\r\nfunction getHome(){\r\n    document.getElementById(\"query\").value=\"\";\r\n    Router.navigate();\r\n}"]}